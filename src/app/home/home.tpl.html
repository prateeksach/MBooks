<div class="modal-overlay animate-if" ng-if="showModal" ng-click="hideSuperModal()">
  <div class="close-container">
    <i class="fa fa-times"></i>
  </div>

  <div class="table-layout">
    <div class="cell">
      <div class="view-book-modal modal-container" ng-show="bookModal.visible" ng-click="doNothing()" stop-event>
        <div class="book-picture" back-img="{{bookModal.selectedBook.get('picture').url()}}"></div>
        <div class="book-info">
          <div class="info-header">
            <div class="title">{{bookModal.selectedBook.get('name')}}</div>
            <div class="subtitle">{{bookModal.selectedBook.get('courseName')}} ({{bookModal.selectedBook.get('courseTaken')}})</div>
          </div>

          <div class="info-content">
            <div class="text">ISBN: {{bookModal.selectedBook.get('ISBN')}}</div>
            <div class="text">Condition: {{bookModal.selectedBook.get('condition')}}</div>
            <div class="text">Price: ${{bookModal.selectedBook.get('price')}}</div>
            <div class="text" ng-if="bookModal.selectedBook.get('notes')">Notes: {{bookModal.selectedBook.get('notes')}}</div>
          </div>

          <div class="info-footer">
            <button class="btn btn-primary btn-lg btn-block" ng-click="contactSeller()">Inquire About Book</button>
          </div>
        </div>
      </div>
      
      <div class="login-signup-modal login-modal modal-container" ng-show="loginObj.visible" ng-click="doNothing()" stop-event>
        <div class="info-header">
          <div class="title">Login</div>
          <div class="subtitle">Please login to buy and sell on MBooks. Or <span class="link" ng-click="showSignupModal()">signup</span> if you're not a member yet.</div>
        </div>

        <form class="info-content" ng-submit="loginUser()">
          <div class="label">E-Mail</div>
          <div class="input-holder">
            <input type="email" ng-model="loginObj.email" />
          </div>

          <div class="label">Password</div>
          <div class="input-holder">
            <input type="password" ng-model="loginObj.password" />
          </div>

          <div class="input-holder button-holder">
            <button type="submit" class="btn btn-block" ng-class="{'btn-primary':!loginObj.loginError, 'btn-danger':loginObj.loginError}" ng-click="loginUser()">
              <span ng-if="!loginObj.isLoggingIn && !loginObj.loginError">Login</span>
              <span ng-if="loginObj.isLoggingIn">Logging In...</span>
              <span ng-if="loginObj.loginError">{{loginObj.loginError}}</span>
            </button>
          </div>
        </form>
      </div>

      <div class="login-signup-modal signup-modal modal-container" ng-show="signupObj.visible" ng-click="doNothing()" stop-event>
        <div class="info-header">
          <div class="title">Signup</div>
          <div class="subtitle">Please signup to buy and sell on MBooks. Or <span class="link" ng-click="showLoginModal()">login</span> if you're already a member.</div>
        </div>

        <form class="info-content" ng-submit="signupUser()">
          <div class="label">First Name</div>
          <div class="input-holder">
            <input type="text" ng-model="signupObj.firstName" />
          </div>

          <div class="label">Last Name</div>
          <div class="input-holder">
            <input type="text" ng-model="signupObj.lastName" />
          </div>

          <div class="label">Phone Number (not shared without your permission)</div>
          <div class="input-holder">
            <input type="text" placeholder="No Dashes" ng-model="signupObj.phone" />
          </div>

          <div class="label">E-Mail</div>
          <div class="input-holder">
            <input type="email" ng-model="signupObj.email" />
          </div>

          <div class="label">Password</div>
          <div class="input-holder">
            <input type="password" ng-model="signupObj.password" />
          </div>

          <div class="label">Confirm Password</div>
          <div class="input-holder">
            <input type="password" ng-model="signupObj.confirm" />
          </div>

          <div class="input-holder button-holder">
            <button type="submit" class="btn btn-block" ng-class="{'btn-primary':!signupObj.signupError, 'btn-danger':signupObj.signupError}" ng-click="loginUser()">
              <span ng-if="!signupObj.isSigningUp && !signupObj.signupError">Signup</span>
              <span ng-if="signupObj.isSigningUp">Signing Up...</span>
              <span ng-if="signupObj.signupError">{{signupObj.signupError}}</span>
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>

<div class="home-page">
  <div class="jumbotron">
    <div class="overlay"></div>
    
    <div class="container">
      <div class="row">
        <div class="col-md-9 col-sm-12">
          <h1>Find Books on Campus</h1>
      
          <p>
            Have you been using Facebook groups to buy and sell groups? Does it suck? Then, this is what you need. We're a one-stop shop for books at the University of Michigan.
          </p>

          <form class="search-holder" ng-submit="searchBooks()">
            <div class="input-holder">
              <input type="text" placeholder="Search by book name, course name, ISBN" ng-model="searchBooksObj.query" />
            </div>
            <div class="input-holder button-holder">
              <button type="submit" ng-click="searchBooks()" class="btn btn-primary btn-lg">Search</button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>

  <div class="book-cards">
    <div class="container">
      <div class="row">
        <div class="col-md-3 col-sm-6 col-xs-12" ng-repeat="book in searchBooksObj.results" ng-if="searchBooksObj.results.length">
          <div class="book-card" ng-click="showBookModal(book)">
            <div class="picture-holder">
              <div class="picture-overlay">
                <div class="table-layout">
                  <div class="cell">
                    <div class="title">${{book.get('price')}}</div>
                    <div class="tip">{{book.get('numViews')}} Views Today</div>
                  </div>
                </div>
              </div>
              <div class="picture" back-img="{{book.get('picture').url()}}"></div>
            </div>

            <div class="info-holder">
              <div class="title">{{book.get('name')}}</div>
              <div class="subtitle">{{book.get('courseName')}} ({{book.get('courseTaken')}})</div>
              <div class="tip">{{book.get('condition')}} &bull; {{getBookPostedDate(book)}}</div>
            </div>
          </div>
        </div>

        <div class="col-md-3 col-sm-6 col-xs-12" ng-repeat="book in recentBooksObj.results" ng-if="!searchBooksObj.results.length">
          <div class="book-card" ng-click="showBookModal(book)">
            <div class="picture-holder">
              <div class="picture-overlay">
                <div class="table-layout">
                  <div class="cell">
                    <div class="title">${{book.get('price')}}</div>
                    <div class="tip">{{book.get('numViews')}} Views Today</div>
                  </div>
                </div>
              </div>
              <div class="picture" back-img="{{book.get('picture').url()}}"></div>
            </div>

            <div class="info-holder">
              <div class="title">{{book.get('name')}}</div>
              <div class="subtitle">{{book.get('courseName')}} ({{book.get('courseTaken')}})</div>
              <div class="tip">{{book.get('condition')}} &bull; {{getBookPostedDate(book)}}</div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div> 